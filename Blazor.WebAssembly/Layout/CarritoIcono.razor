@implements IDisposable
@inject CarritoService CarritoService
@inject NavigationManager Navigation

<AuthorizeView>
    <Authorized>
        <a href="/carrito"
           class="nav-link text-light position-relative d-flex align-items-center justify-content-center"
           style="background-color: #0d6efd; width: 40px; height: 40px; border-radius: 50%; margin-left: 1rem; overflow: visible;">

            <span class="bi bi-cart" style="font-size: 1.3rem;"></span>

            @if (CarritoService.TotalItems > 0)
            {
                <span class="position-absolute badge rounded-pill bg-danger text-white"
                      style="top: 1px; right: 1px; font-size: 0.65rem; min-width: 16px; height: 16px;
                         display: flex; align-items: center; justify-content: center; line-height: 1;">
                    @CarritoService.TotalItems
                </span>
            }
        </a>

    </Authorized>
</AuthorizeView>

@code {
    protected override void OnInitialized()
    {
        CarritoService.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        CarritoService.OnChange -= StateHasChanged;
    }
}